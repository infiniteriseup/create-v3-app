---
const currentPage = Astro.url.pathname;

const hasTrailing = currentPage.endsWith('/');
const currentPageMatch = currentPage.slice(
  1,
  hasTrailing ? -1 : currentPage.length
);

type MenuItem = {
  href: string;
  label: string;
};

const menu: MenuItem[] = [
  {
    href: '/docs/introduction',
    label: 'Introduction'
  },
  {
    href: '/docs/getting-started',
    label: 'Getting Started'
  },
  {
    href: '/docs/folder-structure',
    label: 'Folder Structure'
  },
  {
    href: '/docs/why-no-tailwind',
    label: 'Why not using Tailwind ?'
  },
  {
    href: '/docs/faq',
    label: 'F.A.Q'
  },
  { href: '/docs/about-the-author', label: 'Who made this ?' }
];

const isActive = (item: MenuItem) => currentPageMatch === item.href.slice(1);
---

<nav>
  <h2>Create V3 App</h2>
  <ul>
    {
      menu.map(item => (
        <li>
          <a href={item.href} class={isActive(item) ? 'active' : ''}>
            {item.label}
          </a>
        </li>
      ))
    }
  </ul>
  <h2>Usage</h2>
  TODO
</nav>

<style>
  h2 {
    font-weight: var(--font-weight-7);
    font-size: var(--font-size-4);
    margin-block-end: var(--size-3);
  }
  ul {
    margin-block-end: var(--size-8);
    list-style: none;
    padding-inline: 0;
  }

  li {
    padding: 0;
  }

  li + li {
    margin-block-start: var(--size-3);
  }

  a,
  a:visited {
    color: inherit;
    display: block;
  }

  a:hover {
    text-decoration: underline;
  }

  a.active {
    background: var(--color-active);
  }
</style>
